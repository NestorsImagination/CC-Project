# Introducción

Este proyecto consistirá en la realización de un videojuego multijugador del género shooter básico, usando Unity para desarrollar la parte del cliente, al cuál se podrá acceder por web, y desarrollando una arquitectura de servidor eficaz, la cual sirva para manejar las funciones necesarias del servidor central (iniciar la sesión de los usuarios, consultar y modificar datos de los jugadores, matchmaking, etc.) y para sincronizar los jugadores en varias partidas simultáneas.

# Arquitectura

Se usará, lo más probable (a no ser que se compruebe que otra arquitectura es más adecuada), una arquitectura basada en microservicios. Una parte muy importante de éste sistema es el matchmaking: que al unirse a una partida aparezca una pantalla de espera hasta que un número determinado de jugadores estén también esperando a encontrar partida (4, por ejemplo). En ese momento, el servicio de matchmaking habrá de comunicar a estos clientes la dirección de uno de los servidores disponibles de juego y, una vez conectados, podrán jugar online, comunicándose entre ellos por medio del servidor de juego devuelto, que además correrá una simulación del juego, de forma que haga los cálculos necesarios y sincronice todos los jugadores (y evite que hagan trampas). La arquitectura quedaría más o menos así (sujeta a cambios de mejora):

![Imagen arquitectura](http://i1152.photobucket.com/albums/p483/Plenidag/Arquitectura_zpshtubbofz.png)

En este sistema, el servicio de login se encargaría de iniciar y cerrar sesión de los usuarios, el Master Server se encargaría de realizar las funciones necesarias del menú principal (manejar los datos de los jugadores principalmente), y el servicio Matchmaker tendrá dos funciones: registrará los servidores disponibles de partidas (a los que se conectarán los jugadores para jugar entre sí) y aceptará peticiones de los jugadores para entrar en partida. Una vez el Matchmaker aloja un número determinado de peticiones de entrar en partida (4, por ejemplo, para una partida 2 vs 2), les devolverá la dirección de uno de los servidores de partida disponibles (World Master). Los usuarios se conectarán a éste y podrán jugar la partida. Cada WorldMaster se encargará de manejar las funciones de sincronización entre clientes que no requieran de una simulación del "mundo" (como el chat), y se encargará de comunicar al World Simulator asociado la información relativa a los jugadores (inputs y acciones). El World Simulator será desarrollado también con Unity, y se encargará de actualizar el mundo según los inputs enviados por los jugadores, y de pedir al World Master que envíe a los jugadores los datos sobre el estado del mundo periódicamente, de forma que todos los jugadores estén sincronizados.
